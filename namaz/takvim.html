<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 Mart Takvimi - Furkan Namaz Vakitleri</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .table-wrapper {
            background: #1e293b;
            border-radius: 20px;
            padding: 10px;
            overflow-x: auto; /* Mobilde tablonun kaymasını sağlar */
        }
        table {
            width: 100%;
            border-collapse: collapse;
            color: #f8fafc;
            min-width: 500px; /* Tablonun çok daralmasını önler */
        }
        th {
            background: #0f172a;
            color: #10b981;
            padding: 12px;
            font-size: 13px;
            text-transform: uppercase;
        }
        td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #334155;
            font-size: 15px;
        }
        .today-row {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
            font-weight: bold;
        }
        .back-btn {
            background: #334155;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="mobile-container" style="max-width: 800px;"> <div class="app-header">
        <h1>10 Mart'a Kadar Vakitler</h1>
        <p>Seçilen bölge için namaz takvimi</p>
    </div>

    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>Tarih</th>
                    <th>İmsak</th>
                    <th>Öğle</th>
                    <th>İkindi</th>
                    <th>Akşam</th>
                    <th>Yatsı</th>
                </tr>
            </thead>
            <tbody id="calendar-body">
                </tbody>
        </table>
    </div>

    <button class="btn-primary back-btn" onclick="window.history.back()">⬅ Başka Bölge Seç</button>

    <footer class="app-footer">
        © 2026 Cakir IT Solutions | Geliştirici: <strong>Furkan</strong>
    </footer>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const ilceId = urlParams.get('id');

    if(ilceId) {
        fetch(`api/vakitler/${ilceId}.json`)
            .then(res => res.json())
            .then(data => {
                let html = '';
                const today = new Date().toLocaleDateString('tr-TR');
                
                data.forEach(v => {
                    const gunParts = v.MiladiTarihKisa.split('.');
                    const vakitDate = new Date(gunParts[2], gunParts[1]-1, gunParts[0]);
                    const limitDate = new Date(2026, 2, 11); // 11 Mart'tan öncesi

                    if (vakitDate < limitDate) {
                        const isToday = v.MiladiTarihKisa === today ? 'class="today-row"' : '';
                        html += `
                            <tr ${isToday}>
                                <td>${v.MiladiTarihKisa.split('.')[0]} ${v.KameriTarihKisa.split(' ')[1]}</td>
                                <td>${v.Imsak}</td>
                                <td>${v.Ogle}</td>
                                <td>${v.Ikindi}</td>
                                <td>${v.Aksam}</td>
                                <td>${v.Yatsi}</td>
                            </tr>`;
                    }
                });
                document.getElementById('calendar-body').innerHTML = html;
            });
    }
</script>
</body>
</html>
